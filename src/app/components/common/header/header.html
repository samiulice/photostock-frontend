<nav class="bg-white">
  <div class="max-w-7xl mx-auto px-4">
    <div class="flex items-center justify-between h-16">
      <!-- Left: Logo + Nav -->
      <div class="flex items-center space-x-4">
        <img class="h-8 w-auto" src="https://tailwindcss.com/plus-assets/img/logos/mark.svg?color=indigo&shade=500"
          alt="Logo" />
        <div class="hidden md:flex space-x-4">
          <a href="/"
            class="text-[#3d2ad0e1] hover:bg-[#3d2ad0e1] hover:text-white px-3 py-2 rounded-md text-sm font-bold">Home</a>
          <a routerLink="/image"
            class="text-[#3d2ad0e1] hover:bg-[#3d2ad0e1] hover:text-white px-3 py-2 rounded-md text-sm font-bold">Images</a>
        </div>
      </div>

      <!-- Center: Search (absolute center with flex-1) -->
      <div class="hidden md:block flex-1 px-4 ml-30">
        <input type="text" placeholder="Search images..."
          class="w-full px-3 py-1 rounded-md border border-gray-300 text-blue focus:outline-none focus:ring-[0.5px]" />
      </div>

      <!-- Right: Login/Register OR Profile -->
      <div class="flex items-center space-x-2 pl-80">
        <ng-container *ngIf="!isLoggedIn">
          <a routerLink="/login"
            class="text-[#3d2ad0e1] hover:bg-[#3d2ad0e1] hover:text-white px-3 py-2 rounded-md text-sm font-bold ml-20">Login</a>
          <a routerLink="/register"
            class="text-[#3d2ad0e1] hover:bg-[#3d2ad0e1] hover:text-white px-3 py-2 rounded-md text-sm font-bold">Register</a>
        </ng-container>
        <ng-container *ngIf="isLoggedIn">
          <!-- Profile Dropdown Container -->
          <div #dropdownWrapper class="relative inline-block" (click)="toggleDropdown()">
            <!-- Avatar Button -->
            <img [src]="getAvatarURL()" alt="Profile" [title]="getUserName()"
              class="w-10 h-10 rounded-full object-cover border border-gray-300 cursor-pointer" />

            <!-- Dropdown Menu -->

            <div *ngIf="dropdownOpen"
              class="absolute top-full left-1/2 -translate-x-1/2 mt-2 w-55 bg-[#E3F2FF66] rounded-lg shadow-lg border border-gray-200 z-50">
              <div class="px-4 py-3 text-center">
                <p class="text-sm font-bold text-gray-800">
                  {{ getUserName() }}
                </p>
                <p class="text-sm text-gray-500 mt-1">{{ getUserEmail() }}</p>
              </div>
              <div class="border-t border-gray-200">
                <div class="flex justify-around">
                  <div class="flex items-center space-x-1 p-2">
                    <button (click)="logout()"  class="px-1 py-2 rounded text-sm text-[#3d2ad0e1] font-bold inline-flex justify-center hover:bg-gray-200">
                      <span class="material-icons text-[#3d2ad0e1]" style="
                          margin:2px;
                          font-size: 18px;
                          line-height: 1;
                          display: inline-flex;
                          align-items: center;
                        ">
                        power_settings_new </span>Logout
                    </button>
                  </div>

                  <div class="flex items-center space-x-1 p-2">
                    <button routerLink="/profile/" class="px-1 py-2 rounded text-sm text-[#3d2ad0e1] font-bold inline-flex justify-center hover:bg-gray-200">
                      <span class="material-icons text-[#3d2ad0e1]" style="
                      margin:2px;
                          font-size: 18px;
                          line-height: 1;
                          display: inline-flex;
                          align-items: center;
                        ">
                        person </span>Profile
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </ng-container>
      </div>
    </div>
  </div>
</nav>